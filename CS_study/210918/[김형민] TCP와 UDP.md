# TCP와 UDP  
- TCP와 UDP는 OSI 7계층 중 제 4 계층인 전송계층(Transport Layer)에 해당하고 보내고자 하는 데이터의 용량과, 속도, 목적지를 처리  

### TCP와 UDP의 차이점  
  
- 신뢰성의 문제  
- 흐름 제어의 유무  
- 속도의 차이  
- 서버와 클라이언트의 연결 통신 방식  
  
**TCP UDP의 활용**    
- 신뢰성이 중요한 금융쪽 통신에서는 아무리 속도가 빨라도 UDP보단 TCP를 활용    
- 여러개의 이미지로 구성된 영상 데이터의 경우 한두 프레임의 손실이 영상의 질에 크게 영향을 끼치지 않기 때문에 신뢰성보다 연속성이 중요한 리얼타임의 데이터를 송수신하는 음성통화나 유튜브, 스트리밍은 UDP를 활용   
  
>여담으로 HTTP2.0까지는 TCP기반의 통신을 했지만 HTTP3.0에서는 UDP 기반의 QUIC이라는 프로토콜을 사용해서 신뢰성과 속도를 둘다 잡은 통신 방식을 채택하였음

### TCP의 특징   
  
**연결형 서비스**  
- 연결형 서비스로 가상 회선 방식을 제공  
	-> 3-way handshaking 과정을 통해 연결 / 4-way handshaking 을 통해 해제  
	>3-way handshaking   
	>클라이언트에서 SYN을 보내면 서버에서 SYN + ACK 패킷을 보내고 마지막으로 클라이언트에서 ACK 패킷을 보내어 연결  
	>4 way handshake  
	>클라언트의 마지막 요청 패킷에 FIN 패킷을 보내면 서버가 ACK 패킷을 보내어 응답하고 서버의 마지막 응답 패킷에 FIN 패킷을 보내면 클라이언트가 ACK 패킷을 보내어 응답  
**흐름제어(Flow control)**  
- 데이터 처리 속도를 조절하여 수신자의 버퍼 오버플로우를 방지  
	-> 수신자가 윈도우크기(Window Size) 값을 통해 수신량을 정할 수 있음  
	-> 송신하는 곳에서 감당이 안되게 많은 데이터를 빠르게 보내 수신하는 곳에서 문제가 일어나는 것을 방지  
**혼잡제어(Congestion control)**  
- 네트워크 내의 패킷 수가 넘치게 증가하지 않도록 방지  
	-> 정보의 소통량이 과다하면 패킷을 조금만 전송하여 혼잡 붕괴 현상이 일어나는 것을 방지  
**신뢰성이 높은 전송(Reliable transmission)**  
- Dupack-based retransmission  
	-> 정상적인 상황에서는 ACK 값이 연속적으로 전송되어야 함  
	-> 그러나 ACK값이 중복으로 올 경우 패킷 이상을 감지하고 재전송을 요청  
- Timeout-based retransmission  
	-> 일정시간동안 ACK 값이 수신을 못할 경우 재전송을 요청  
**전이중, 점대점 방식**  
- 전이중 (Full-Duplex)  
    - 전송이 양방향으로 동시에 일어날 수 있음   
- 점대점 (Point to Point)  
    - 각 연결이 정확히 2개의 종단점을 가지고 있음  

### TCP와 UDP의 헤더 정보  
**TCP**
|필드|크기|내용|
|---|---|---|
|송수신자의 포트 번호|16|TCP로 연결되는 가상 회선 양단의 송수신 프로세스에 할당되는 포트 주소|
|시퀀스 번호|32|송신자가 지정하는 순서 번호, 전송되는 바이트 수를 기준으로 증가|
|응답 번호|32|수신 프로세스가 제대로 수신한 바이트 수를 응답하기 위해 사용|
|데이터 오프셋|4|TCP 세그먼트의 시작 위치를 기준으로 데이터의 시작 위치를 표현|
|예약 필드|6|나중을 위한 예약 필드이며 0으로 채워져야 함|
|제어 비트|6|SYN,ACK,FIN 등의 제어 번호|
|윈도우 크기|16|수신 윈도우의 버퍼 크기를 지정할 때 사용|
|체크섬|16|TCP 세그먼트에 포함되는 프로토콜 헤더와 데이터에 대한 오류 검출 용도|
|긴급 위치|16|긴급 데이터를 처리하기 위함|  
  
**UDP**
|필드|크기|내용|
|---|---|---|
|송신자의 포트 번호|16|데이터를 보내는 애플리케이션의 포트 번호|
|수신자의 포트 번호|16|데이터를 받을 애플리케이션의 포트 번호|
|데이터의 길이|16|UDP 헤더와 데이터의 총 길이|
|체크섬|16|데이터 오류 검사에 사용|  
  
### 출처
[hi, Daehyunlee Blog](https://velog.io/@hidaehyunlee/TCP-%EC%99%80-UDP-%EC%9D%98-%EC%B0%A8%EC%9D%B4)

